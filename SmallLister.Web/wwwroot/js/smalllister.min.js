function smlInitialise(){smlInitialiseNav();$("ul.sml-list").sortable({handle:".sml-list-item-drag-handle",isValidTarget:function(n,t){return t.el[0].className.includes("sml-list-item")},onDrop:function(n,t,i,r){i(n,t,r);let u=n.attr("data-meal"),f=n.parent("ul").attr("data-day");if(typeof u!="undefined"&&typeof f!="undefined"){let t=parseInt(n.prev("li").attr("data-meal"));$.ajax({url:"/api/planner/"+u+"/move",type:"PUT",data:JSON.stringify({date:f,sortOrderPreviousPlannerMealId:t==NaN?null:t}),contentType:"application/json; charset=utf-8",dataType:"json"});return}let e=n.attr("data-shoppinglistitem");if(typeof e!="undefined"){let t=parseInt(n.prev("li").attr("data-shoppinglistitem"));$.ajax({url:"/api/shoppinglist/"+e+"/move",type:"PUT",data:JSON.stringify({sortOrderPreviousShoppingListItemId:t==NaN?null:t}),contentType:"application/json; charset=utf-8",dataType:"json"});return}}});$("button[data-depends]").each(function(){let n=$(this),t=$(n.attr("data-depends"));t.on("keypress",function(t){if(n.attr("disabled")&&(t.keyCode||t.which)===13)return t.preventDefault(),!1});t.on("change input paste keyup",function(){let t=$(this).val();n.prop("disabled",t===null||t.match(/^\s*$/)!==null)});t.trigger("change")});$("form[data-confirm]").submit(function(n){if(!confirm($(this).attr("data-confirm")))return n.preventDefault(),!1})}function smlInitialiseNav(){$(window).resize(function(){$("aside").css("display","");$(".nav-close:visible").length>0&&($(".nav-close").css("display",""),$(".nav-show").css("display",""))});$(".nav-show").click(function(){$("aside").fadeToggle("fast");$(this).hide();$(".nav-close").show()});$(".nav-close").click(function(){$("aside").hide();$(this).hide();$(".nav-show").show()});$("[data-href]").click(function(){window.location.href=$(this).attr("data-href")})}