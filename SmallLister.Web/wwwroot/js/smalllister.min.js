function smlInitialise(){smlInitialiseNav();let n=$("ul.sml-list"),t=n.attr("data-baseuri");typeof t!="undefined"&&n.sortable({handle:".sml-list-item-drag-handle",isValidTarget:function(n,t){return t.el[0].className.includes("sml-list-item")},onDrop:function(n,i,r,u){r(n,i,u);let f=n.attr("data-listitem");if(typeof f!="undefined"){let i=parseInt(n.prev("li").attr("data-listitem"));console.log("moving item "+f+" to be after "+i);$.ajax({url:t+"/"+f+"/move",type:"PUT",data:JSON.stringify({sortOrderPreviousListItemId:i==NaN?null:i}),contentType:"application/json; charset=utf-8",dataType:"json"});return}}});$("[data-depends]").each(function(){let t=$(this),n=$(t.attr("data-depends"));if(n.is("input"))n.on("keypress",function(n){if(t.attr("disabled")&&(n.keyCode||n.which)===13)return n.preventDefault(),!1});n.on("change input paste keyup pickmeup-change",function(){let n=$(this).val();t.prop("disabled",n===null||n.match(/^\s*$/)!==null)});n.trigger("change")});$("form[data-confirm]").submit(function(n){if(!confirm($(this).attr("data-confirm")))return n.preventDefault(),!1})}function smlInitialiseNav(){$(window).resize(function(){$("aside").css("display","");$(".nav-close:visible").length>0&&($(".nav-close").css("display",""),$(".nav-show").css("display",""))});$(".nav-show").click(function(){$("aside").fadeToggle("fast");$(this).hide();$(".nav-close").show()});$(".nav-close").click(function(){$("aside").hide();$(this).hide();$(".nav-show").show()});$("[data-href]").click(function(){window.location.href=$(this).attr("data-href")})}